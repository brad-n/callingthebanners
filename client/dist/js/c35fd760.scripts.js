!function(){"use strict";window.cfg||(window.cfg={hostAndPort:function(){return"//"+window.location.host},host:function(){return"http://"+window.location.host.replace(/:[0-9]+$/,"")},apiBaseUrl_set:"",apiBaseUrl:function(){return this.apiBaseUrl_set?this.apiBaseUrl_set:(this.hostAndPort().match(/callingthebanners.com/)?(this.server="//app.callingthebanners.com",this.basehref="/"):this.host().match(/(192.)/)?(console.log(this.hostAndPort()),this.server=this.hostAndPort()+"/callingthebaners/server/",this.basehref="/callingthebanners/client/"):(this.hostAndPort().match(/:8888/)||this.host().match(/(localh|127.0.0|0.0.0)/))&&(this.server="//localhost:8888/callingthebanners/server/",this.basehref="/callingthebanners/client/"),this.apiBaseUrl_set=this.server,this.apiBaseUrl_set)}})}();var app=angular.module("callingTheBanners",["ngRoute","restangular","templates-main","ui.bootstrap","angularModalService"]);app.run(["$rootScope","Auth",function(rs,Auth){rs.baseURL=cfg.baseHref,rs.Auth=Auth}]),app.config(["$routeProvider","$locationProvider",function($routeProvider,$locationProvider){"use strict";$locationProvider.html5Mode(!0),$routeProvider.when("/",{controller:"MainController",templateUrl:"js/main/main.html",resolve:{app:function(Auth,$q,$rootScope,$location){var deferred=$q.defer();return Auth.isLoggedIn().then(function(res){res.loggedIn?deferred.resolve(!0):$location.path("/login")}),deferred.promise}}}).when("/faq",{templateUrl:"js/faq/faq.html",controller:"FaqController"}).when("/contact",{templateUrl:"js/contact/contact.html",controller:"ContactController"}).when("/whats-new",{templateUrl:"js/whatsnew/whatsnew.html",controller:"WhatsNewController"}).when("/login",{templateUrl:"js/login/login.html",controller:"LoginController",resolve:{app:function(Auth,$q,$rootScope,$location){var deferred=$q.defer();return Auth.isLoggedIn().then(function(res){res.loggedIn?$location.path("/"):deferred.resolve(!0)}),deferred.promise}}}).when("/signup",{templateUrl:"js/login/login.html",controller:"LoginController",resolve:{app:function(Auth,$q,$rootScope,$location){var deferred=$q.defer();return Auth.isLoggedIn().then(function(res){res.loggedIn?$location.path("/"):deferred.resolve(!0)}),deferred.promise}}}).otherwise({redirectTo:"/"})}]).run(["Restangular","$rootScope",function(RestProvider,rs){"use strict";RestProvider.setBaseUrl(cfg.apiBaseUrl()),RestProvider.addResponseInterceptor(function(data,operation,what,url,response,deferred){return void 0!==data.auth&&0==data.auth&&(console.log("Failed auth!  Redirecting."),$location.path("/login")),data})}]),app.factory("Api",["Restangular","$rootScope","$q","$location","$http",function(Rest,$rootScope,$q,$location,$http){"use strict";window.Api=this;return{getAccountDetails:function(opts){return Rest.all("account/checkauth/").get("")},createAccount:function(opts){return Rest.all("account/create/").post(opts)},accountLogin:function(opts){return Rest.all("account/signin/").post(opts)},accountLogout:function(){return Rest.all("account/signout/").get("")},searchPlayers:function(opts){return Rest.all("player/search/").post(opts)},loadPlayerByID:function(playerID){return Rest.one("player/"+playerID).get(playerID)},loadTopPlayers:function(opts){return Rest.all("player/top/?offset="+opts.offset+"&limit="+opts.limit).get("")},loadTournamentsByPlayer:function(player_id){return Rest.all("player/tournaments/").get(player_id)},loadTournamentRoundsByPlayer:function(tournament_id,player_id){return Rest.all("tournament/rounds/"+tournament_id+"/").get(player_id)},loadFactionWinLoss:function(playerID){return Rest.one("player/faction/winloss/"+playerID).get(playerID)},loadFactionEntries:function(){return Rest.all("stats/factions/entries/").get("")},loadFactionWins:function(){return Rest.all("stats/factions/wins/").get("")},loadFactionMatchups:function(opts){return Rest.all("stats/faction/matchups/").post(opts)},loadFactionMatchupDetails:function(opts){return Rest.all("stats/faction/matchup_details/").post(opts)},loadFactions:function(){return Rest.all("factions/").get("")},sendMail:function(opts){return console.log("api : "),console.log(opts),Rest.all("send-mail/").post(opts)}}}]),app.factory("Auth",["$rootScope","$q","$location","$window","$http","Api",function($rootScope,$q,$location,$window,$http,Api){"use strict";window.Api=this;var user={};return{isLoggedIn:function(){var deferred=$q.defer();return user.loggedIn?deferred.resolve(user):Api.getAccountDetails().then(function(res){res.data.user_id?(user.loggedIn=!0,user.user_id=res.data.user_id,user.user_name=res.data.user_name):user.loggedIn=!1,deferred.resolve(user)}),deferred.promise},logOut:function(){Api.accountLogout().then(function(res){$window.location.href=""})},hasAuth:function(){return user.loggedIn},getUser:function(){return user}}}]);var MainCtrl=app.controller("MainController",["$scope","Restangular","$routeParams","$route","$location","$q","Api",function($scope,Rest,$routeParams,$route,$location,$q,Api){$scope.search_str="",$scope.players=[],$scope.top_players=[],$scope.loading=!1,$scope.page=1}]);angular.module("templates-main",["js/contact/contact.html","js/faq/faq.html","js/groups/group_list.html","js/header/header.tpl.html","js/login/login.html","js/main/main.html","js/player/faction_winloss.html","js/player/player_details.html","js/player/player_nemesis.html","js/player/player_rival.html","js/player/player_rounds.html","js/player/player_tournaments.html","js/player/top_players.html","js/search/search_form.tpl.html","js/search/search.html","js/stats/faction_matchups.html","js/stats/faction_wins_linechart.html","js/stats/match_details.html","js/stats/played_factions_linechart.html","js/stats/stats.html","js/whatsnew/whatsnew.html"]),angular.module("js/contact/contact.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/contact/contact.html",'<div class="col-lg-12 col-md-12 col-sm-12">\n  <div class="alert alert-danger" ng-show="error">\n    <button class="close" data-dismiss="alert">x</button>\n    <strong>Error!</strong> An error occured while trying to send message.\n  </div>\n  <div class="alert alert-success" ng-show="success">\n    <button class="close" data-dismiss="alert">x</button>\n    <strong>Success! </strong> Your message was successfully sent.\n  </div>\n  <div ng-if="!success">\n    <div class="form-group" ng-class="{error: contactForm.name.$invalid}">\n    <label>Full Name</label>\n    <input class="form-control" type="text" name="name" ng-model="user.name" required="required" placeholder="Your name">\n      <span class="help-block" ng-show="contactForm.name.$error.required">Required</span>\n    </div>\n    <div class="form-group" ng-class="{error: contactForm.email.$invalid}">\n      <label>Email</label>\n      <input class="form-control" type="email" name="email" ng-model="user.email" required="required" placeholder="Your email address">\n      <span class="help-block" ng-show="contactForm.email.$error.required">Required</span>\n      <span class="help-block" ng-show="contactForm.email.$error.email">Invalid email address</span>\n    </div>\n    <div class="form-group" ng-class="{error: contactForm.message.$invalid}">\n      <label>Message</label>\n      <textarea class="form-control" rows="5" name="message" ng-model="user.message" required="required" placeholder="Your messsage"></textarea>\n      <span class="help-inline" ng-show="contactForm.message.$error.required">Required</span>\n    </div>\n    <button class="btn btn-primary btn-lg btn-block" ng-click="send()" ng-disabled="contactForm.$invalid">Send</button>\n    </div>\n</div>')}]),angular.module("js/faq/faq.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/faq/faq.html",'<div class="panel-group" id="accordion">\n\t<div class="panel panel-default" ng-repeat="faq in faqs">\n\t\t<div class="panel-heading">\n\t\t\t<h4 class="panel-title">\n\t\t\t\t<a class="accordion-toggle" ng-class="$index!=0?\'collapsed\':\'\'" href="javascript:void(0);" data-toggle="collapse" data-parent="#accordion" data-target="#collapse{{faq.id}}" aria-expanded="false">{{faq.q}}</a>\n\t\t\t</h4>\n\t\t</div>\n\t\t<div id="collapse{{faq.id}}" class="panel-collapse collapse"  ng-class="$index!=0?\'\':\'in\'" aria-expanded="false">\n\t\t\t<div class="panel-body">\n\t\t\t\t<div ng-bind-html="toTrustedHTML(faq.a)"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>')}]),angular.module("js/groups/group_list.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/groups/group_list.html",'<div class="col-sm-8 col-sm-offset-2 card">\n\t<div class="view">\n\t\t<h2 class="h2-responsive">My Groups</h2>\n\t\t\n\t\t<div class="card-body">\n\t\t\t\n\t\t\t<div ng-if="group_count < 1">\n\t\t\t\tYou don\'t currently belong to any groups.  <a href="">Create</a> one?\n\t\t\t</div>\n\t\t\t\n\t\t\t\n\t\t\t<div ng-if="group_count > 0">\n\t\t\t\n\t\t\t\t<table>\n\t\t\t\t</table>\n\t\t\t\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t\t\n    </div>\n\t\n</div>')}]),angular.module("js/header/header.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/header/header.tpl.html",'<nav class="navbar navbar-default navbar-fixed-top">\n      <div class="container">\n        <div class="navbar-header">\n          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">\n            <span class="sr-only">Toggle navigation</span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n          </button>\n      \t\t<a class="navbar-brand" href="{{baseURL}}">\n        \t\t\t<img alt="Raven" style="height:45px; width:auto; margin-top:-12px;" src="img/banner.png">\n      \t\t</a>\n      \t\t<b class="navbar-brand"><a href="{{baseURL}}" style="color:black; hover:black; active:black">Calling the Banners</a></b>\n        </div>\n        <div id="navbar" class="navbar-collapse collapse" aria-expanded="false" style="height: 1px;">\n          <ul class="nav navbar-nav navbar-right">\n            <li ng-if="Auth.hasAuth()" active-link="active" link="{{baseURL}}"><a href="{{baseURL}}">Home</a></li>\n            <li ng-if="Auth.hasAuth()" active-link="active" link="{{baseURL}}groups"><a href="{{baseURL}}stats">Groups</a></li>\n\t\t\t<li active-link="active" link="{{baseURL}}faq"><a href="{{baseURL}}faq">FAQ</a></li>\n\t\t\t<li active-link="active" link="{{baseURL}}whats-new"><a href="{{baseURL}}whats-new">What\'s New</a></li>\n\t\t\t<li active-link="active" link="{{baseURL}}contact"><a href="{{baseURL}}contact">Contact</a></li>\n\t\t\t<li ng-if="Auth.hasAuth() && Auth.hasGroup()" active-link="active" link="{{baseURL}}logout"><a href="javascript:void(0);" ng-click="Auth.logOut();">{{Auth.groupName}}</a></li>\n\t\t\t<li ng-if="Auth.hasAuth()" active-link="active" link="{{baseURL}}logout"><a href="javascript:void(0);" ng-click="Auth.logOut();">Logout</a></li>\n\t\t\t<li ng-if="!Auth.hasAuth()" active-link="active" link="{{baseURL}}login"><a href="{{baseURL}}login">Login</a></li>\n\t\t\t<li ng-if="!Auth.hasAuth()" active-link="active" link="{{baseURL}}signup"><a href="{{baseURL}}signup">Sign up</a></li>\n          </ul>\n        </div>\x3c!--/.nav-collapse --\x3e\n      </div>\n</nav>')}]),angular.module("js/login/login.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/login/login.html",'<h3 class="text-center"><span style="color:red">{{error}}</span>&nbsp;</h3>\n\n\x3c!--Card--\x3e\n<div ng-if="show_login" class="col-sm-4 col-sm-offset-4 card card-cascade">\n\n    \x3c!--Card image--\x3e\n    <div class="view">\n        <h2 class="h2-responsive text-center">Account Login</h2>\n    </div>\n    \x3c!--/Card image--\x3e\n\n    \x3c!--Card content--\x3e\n    <div class="card-body text-center">\n    \t\t<form onsubmit="accountLogin();">\n\t\t\t<div class="form-group">\n\t\t\t\t<input type="text" ng-model="user.user_email" />\n\t\t\t\t<label>Email</label>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="form-group">\n\t\t\t\t<input type="password" ng-model="user.password" />\n\t\t\t\t<label>Password</label>\n\t\t\t</div>\n\t\t\t\n\t\t\t<input type="submit" value="Login" class="btn btn-default" ng-click="accountLogin();" />\n\t        <div class="clearfix"></div>\n\t        <a href="javascript:void(0)" ng-click="toggleView(\'create\')">create account</a>\n\t        <div class="clearfix"></div>\n\t        <br/> \x3c!-- buffer / padding --\x3e\n\t\t</form>\n    </div>\n    \x3c!--/.Card content--\x3e\n\n</div>\n\x3c!--/.Card--\x3e\n\n\n\x3c!--Card--\x3e\n<div ng-if="show_create" class="col-sm-4 col-sm-offset-4 card card-cascade">\n\n    \x3c!--Card image--\x3e\n    <div class="view">\n        <h2 class="h2-responsive text-center">Create Account</h2>\n    </div>\n    \x3c!--/Card image--\x3e\n\n    \x3c!--Card content--\x3e\n    <div class="card-body text-center">\n    \n    \t\t\t<div class="form-group">\n\t\t\t\t<input type="text" ng-model="new_user.user_name" />\n\t\t\t\t<label>Name</label>\n\t\t\t</div>\n    \n\t\t\t<div class="form-group">\n\t\t\t\t<input type="text" ng-model="new_user.user_email" />\n\t\t\t\t<label>Email</label>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="form-group">\n\t\t\t\t<input type="password" ng-model="new_user.password" />\n\t\t\t\t<label>Password</label>\n\t\t\t</div>\n\t\t\t\n\t\t\t<button class="btn btn-default" ng-click="createAccount();">Create</button>\n\t        <div class="clearfix"></div>\n\t        <a href="javascript:void(0)" ng-click="toggleView(\'login\')">cancel</a>\n\t        <div class="clearfix"></div>\n\t        <br/> \x3c!-- buffer / padding --\x3e\n    </div>\n    \x3c!--/.Card content--\x3e\n\n</div>\n\x3c!--/.Card--\x3e')}]),angular.module("js/main/main.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/main/main.html",'<style>\n[data-toggle="collapse"].collapsed .if-not-collapsed {\n  display: none;\n}\n[data-toggle="collapse"]:not(.collapsed) .if-collapsed {\n  display: none;\n}\n</style>\n\n<div class="clearfix"></div>\n\n<groupList></groupList>\n')}]),angular.module("js/player/faction_winloss.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/player/faction_winloss.html",'<div>\n\t<div class="col-xs-6">\n\t\t<b>Win/Loss by Faction</b>\n\t\t<canvas id="fwl-{{player}}"></canvas>\n\t</div>\n\n\t<div class="col-xs-4">\n\t\t<b>Win Distribution</b>\n\t\t<div class="pie-group">\n\t\t    <canvas id="wd-outter-{{player}}" class="pie-1" height="300" width="300"></canvas>\n\t\t    <canvas id="wd-{{player}}" class="pie-2" height="280" width="280"></canvas>\n\t\t</div>\n\t\t<div class="chartjs-tooltip" id="wd-{{player}}-tooltip">zxzx</div>\n\t</div>\n</div>\n')}]),angular.module("js/player/player_details.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/player/player_details.html",'<div>\n\t<div class="card">\n\t\t<div class="panel-heading">\n\t\t\t<h2><a href="player/{{player.player_id}}">{{player.name}}</a> ({{player.elo}})</h2>\n\t\t</div>\n\t  \t<div class="panel-body">\n\t   \t\t<div class="row">\n\t   \t\t\t<div class="col-xs-6 col-md-3">\n\t   \t\t\t\t<div class="col-xs-12"><b>Entries</b></div>\n\t   \t\t\t\t<div class="col-xs-12">{{player.entries}}</div>\n\t   \t\t\t</div>\n\t\t\t\t<div class="col-xs-6 col-md-3">\n\t   \t\t\t\t<div class="col-xs-12"><b>Win</b></div>\n\t   \t\t\t\t<div class="col-xs-12">{{player.wins}}</div>\n\t   \t\t\t</div>\n\t\t\t\t<div class="col-xs-6 col-md-3">\n\t   \t\t\t\t<div class="col-xs-12"><b>Loss</b></div>\n\t   \t\t\t\t<div class="col-xs-12">{{player.losses}}</div>\n\t   \t\t\t</div>\n\t\t\t\t<div class="col-xs-6 col-md-3">\n\t   \t\t\t\t<div class="col-xs-12"><b>Win%</b></div>\n\t   \t\t\t\t<div class="col-xs-12">\n\t   \t\t\t\t\t<span ng-if="player.name == \'Gabriel Saravia\'">90%!!!</span>\n\t   \t\t\t\t\t<span ng-if="player.name != \'Gabriel Saravia\'">{{ ((player.wins/(player.wins+player.losses))*100).toFixed(2) }}%</span>\n\t   \t\t\t\t\t\n\t   \t\t\t\t</div>\n\t   \t\t\t</div>\n\t   \t\t</div>\n\t   \t\t\n\t   \t\t<div class="row">\n\t   \t\t\t<hr></hr>\n\t   \t\t\t<faction-winloss player="player.player_id">Loading ...</faction-winloss>\n\t   \t\t\t<div class="clearfix"></div>\n\t   \t\t\t<hr></hr>\n\t   \t\t</div>\n\t\t\t   \t\t\n\t   \t\t<div class="row">\n\t   \t\t\t<div class="col-xs-12 col-md-6">\n\t   \t\t\t\t<player-nemesis player="player"></player-nemesis>\n\t   \t\t\t</div>\n\t\t\t   \t\t\t\n\t\t\t\t<div class="col-xs-12 col-md-6">\n\t\t\t\t\t<player-rival player="player"></player-rival>\n\t\t\t\t</div>\n\t\t\t   \t\t\t\n\t\t\t</div>\n\t\t   \t\t\n\t\t   \t\n\t \t</div>\n\t</div>\n\t\n\t<div >\n\t\t<div class="col-xs-12 text-center">\n\t\t\t<player-tournaments player="player"></player-tournaments>\n\t\t</div>\n\t</div>\n\t\n</div>')}]),angular.module("js/player/player_nemesis.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/player/player_nemesis.html",'<div>\n\t<h3>Nemeses</h3>\n\t<table ng-if="player.nemeses.length > 0" class="table table-responsive">\n\t\t<tr>\n\t\t\t<td>Nemesis</td>\n\t\t\t<td>Win</td>\n\t\t\t<td>Loss</td>\n\t\t</tr>\n\t\t<tr ng-repeat="nemesis in player.nemeses">\n\t\t\t<td><a href="player/{{nemesis.winner_id}}">{{nemesis.name}} ({{nemesis.elo}})</a></td>\n\t\t\t<td>{{nemesis.rounds_played-nemesis.defeats}}\n\t\t\t<td>{{nemesis.defeats}}</td>\n\t\t</tr>\n\t</table>\n\t<i ng-if="player.nemeses.length < 1">Play more matches.  Make more enemies.</i>\n</div>')}]),angular.module("js/player/player_rival.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/player/player_rival.html",'<div>\n\t<h3>Rivals</h3>\n\t<table ng-if="player.rivals.length > 0" class="table table-responsive">\n\t\t<tr>\n\t\t\t<td>Rival</td>\n\t\t\t<td>Win</td>\n\t\t\t<td>Loss</td>\n\t\t</tr>\n\t\t<tr ng-repeat="rival in player.rivals">\n\t\t\t<td><a href="player/{{rival.loser_id}}">{{rival.name}} ({{rival.elo}})</a></td>\n\t\t\t<td>{{rival.wins}}\n\t\t\t<td>{{rival.rounds_played - rival.wins}}</td>\n\t\t</tr>\n\t</table>\n\t<i ng-if="player.rivals.length < 1">Play more matches.  BE the enemy.</i>\n</div>')}]),angular.module("js/player/player_rounds.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/player/player_rounds.html",'<div class="text-center">\n\t<a href="javascript:void(0);" class="collapsed" data-toggle="collapse" data-target="#collapseRounds-{{tid}}" aria-expanded="false" aria-controls="collapseExample">\n\t\t<span class="if-collapsed" ng-click="loadPlayerRounds()">Show Rounds</span>\n\t\t<span class="if-not-collapsed">Hide Rounds</span>\n\t</a>\n\t<div class="collapse text-left" id="collapseRounds-{{tid}}">\n\t\t<table class="table table-response">\n\t\t\t<tr>\n\t\t\t\t<td>Round#</td>\n\t\t\t\t<td>Result</td>\n\t\t\t\t<td>End Eol</td>\n\t\t\t\t<td>Start Eol</td>\n\t\t\t\t<td>Change</td>\n\t\t\t\t<td>Opponent</td>\n\t\t\t\t<td>End Eol</td>\n\t\t\t\t<td>Start Eol</td>\n\t\t\t\t<td>Change</td>\n\t\t\t</tr>\n\t\t\t<tbody>\n\t\t\t\t<tr ng-repeat="r in rounds">\n\t\t\t\t\t<td>{{r.round_number}}</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<span ng-if="r.winner_id == player.player_id" style="color:green">Win</span>\n\t\t\t\t\t\t<span ng-if="r.winner_id != player.player_id" style="color:red">Loss</span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<span ng-if="r.player_1_id == player.player_id">{{r.player_1_end_elo}}</span>\n\t\t\t\t\t\t<span ng-if="r.player_1_id != player.player_id">{{r.player_2_end_elo}}</span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<span ng-if="r.player_1_id == player.player_id">{{r.player_1_start_elo}}</span>\n\t\t\t\t\t\t<span ng-if="r.player_1_id != player.player_id">{{r.player_2_start_elo}}</span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<span ng-if="r.player_1_id == player.player_id">\n\t\t\t\t\t\t\t<span ng-if="r.player_1_end_elo-r.player_1_start_elo > 0" style="color:green">{{r.player_1_end_elo-r.player_1_start_elo}}</span>\n\t\t\t\t\t\t\t<span ng-if="r.player_1_end_elo-r.player_1_start_elo <= 0" style="color:red">{{r.player_1_end_elo-r.player_1_start_elo}}</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span ng-if="r.player_2_id == player.player_id">\n\t\t\t\t\t\t\t<span ng-if="r.player_2_end_elo-r.player_2_start_elo > 0" style="color:green">{{r.player_2_end_elo-r.player_2_start_elo}}</span>\n\t\t\t\t\t\t\t<span ng-if="r.player_2_end_elo-r.player_2_start_elo <= 0" style="color:red">{{r.player_2_end_elo-r.player_2_start_elo}}</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td><a href="player/{{r.opponent.player_id}}">{{r.opponent.name}}</a> ({{r.opponent.elo}})</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<span ng-if="r.player_1_id == player.player_id">{{r.player_2_end_elo}}</span>\n\t\t\t\t\t\t<span ng-if="r.player_1_id != player.player_id">{{r.player_1_end_elo}}</span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<span ng-if="r.player_1_id == player.player_id">{{r.player_2_start_elo}}</span>\n\t\t\t\t\t\t<span ng-if="r.player_1_id != player.player_id">{{r.player_1_start_elo}}</span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<span ng-if="r.player_1_id == player.player_id">\n\t\t\t\t\t\t\t<span ng-if="r.player_2_end_elo-r.player_2_start_elo > 0" style="color:green">{{r.player_2_end_elo-r.player_2_start_elo}}</span>\n\t\t\t\t\t\t\t<span ng-if="r.player_2_end_elo-r.player_2_start_elo <= 0" style="color:red">{{r.player_2_end_elo-r.player_2_start_elo}}</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span ng-if="r.player_2_id == player.player_id">\n\t\t\t\t\t\t\t<span ng-if="r.player_1_end_elo-r.player_1_start_elo > 0" style="color:green">{{r.player_1_end_elo-r.player_1_start_elo}}</span>\n\t\t\t\t\t\t\t<span ng-if="r.player_1_end_elo-r.player_1_start_elo <= 0" style="color:red">{{r.player_1_end_elo-r.player_1_start_elo}}</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n \t</div>\n \t<hr></hr>\n</div>')}]),angular.module("js/player/player_tournaments.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/player/player_tournaments.html",'<div>\n\t<a href="javascript:void(0);" class="collapsed" data-toggle="collapse" data-target="#collapseTournaments-{{player.player_id}}" aria-expanded="false" aria-controls="collapseExample">\n\t\t<span class="if-collapsed" ng-click="loadPlayerTournaments()">Show Tournaments</span>\n\t\t<span class="if-not-collapsed">Hide Tournaments</span>\n  \t</a>\n\t<div class="collapse text-left" id="collapseTournaments-{{player.player_id}}">\n  \t\t<div>\n  \t\t\t<div class="row card" ng-repeat="t in tournaments">\n\t  \t\t\t<h3 class="text-left">{{t.name}}</h3>\n    \t\t\t\n\t\t\t\t<div class="row">\n    \t\t\t\t<div class="col-xs-12">\n    \t\t\t\t\t<b>{{t.faction}} {{t.agenda}}</b><br/>\n    \t\t\t\t\t<span ng-if="t.end_elo > 0 && t.end_elo - t.start_elo > 0" style="color:green">{{t.end_elo - t.start_elo}}</span>\n    \t\t\t\t\t<span ng-if="t.end_elo > 0 && t.end_elo - t.start_elo <= 0"style="color:red">{{t.end_elo - t.start_elo}}</span>\n    \t\t\t\t\t<br/>\n    \t\t\t\t</div>\n    \t\t\t</div>\n    \t\t\t\n\t\t\t\t<div class="row">\n\t\t   \t\t\t<div class="col-xs-6 col-md-3">\n\t\t   \t\t\t\t<div class="col-xs-12"><b>End Elo</b></div>\n\t\t   \t\t\t\t<div class="col-xs-12">{{t.end_elo}}</div>\n\t\t   \t\t\t</div>\n\t\t\t\t\t<div class="col-xs-6 col-md-3">\n\t\t   \t\t\t\t<div class="col-xs-12"><b>Start Elo</b></div>\n\t\t   \t\t\t\t<div class="col-xs-12">{{t.start_elo}}</div>\n\t\t   \t\t\t</div>\n\t\t\t\t\t<div class="col-xs-6 col-md-3">\n\t\t   \t\t\t\t<div class="col-xs-12"><b>Players</b></div>\n\t\t   \t\t\t\t<div class="col-xs-12">{{t.player_count}}</div>\n\t\t   \t\t\t</div>\n\t\t\t\t\t<div class="col-xs-6 col-md-3">\n\t\t   \t\t\t\t<div class="col-xs-12"><b>Date</b></div>\n\t\t   \t\t\t\t<div class="col-xs-12">{{t.date_end}}</div>\n\t\t   \t\t\t</div>\n\t\t   \t\t</div>\n\t\t   \t\t<player-rounds tid="t.tournament_id" player="player"></player-rounds>\n\t\t   \t\t\n   \t\t\t</div>\n  \t\t\n  \t\t</div>\n  \t</div>\n</div>')}]),angular.module("js/player/top_players.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/player/top_players.html",'<div>\n\t<h3>Top Players</h3>\n\t<table class="table table-responsive table-hover table-striped">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th>#</th>\n\t\t\t\t<th>Name</th>\n\t\t\t\t<th>Elo</th>\n\t\t\t\t<th>Wins</th>\n\t\t\t\t<th>Losses</th>\n\t\t\t\t<th>Entries</th>\n\t\t\t\t<th>Most Played</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr ng-repeat="player in top_players">\n\t\t\t\t<td>{{$index+1+pagination.offset}}</td>\n\t\t\t\t<td><a href="player/{{player.player_id}}">{{player.name}}</a></td>\n\t\t\t\t<td>{{player.elo}}</td>\n\t\t\t\t<td>{{player.wins}}</td>\n\t\t\t\t<td>{{player.losses}}</td>\n\t\t\t\t<td>{{player.entries}}</td>\n\t\t\t\t<td>{{player.most_played_faction}}</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t<div class="text-center">\n\t\t<ul ng-if="pagination.total" uib-pagination total-items="pagination.total" items-per-page="20" ng-model="pagination.page" max-size="10" ng-change="changePage()" class="pagination-sm" boundary-link-numbers="true"></ul>\n\t</div>\n</div>')}]),angular.module("js/search/search_form.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/search/search_form.tpl.html",'<div class="row">\n\t<div class="text-right">\n\t\t<form class="form-inline">\n\t\t  <div class="form-group">\n\t\t      <input type="text" class="form-control" id="playerSearch" name="name" placeholder="Player Name" ng-model="ps.search_str" />\n\t\t  </div>\n\t\t  <button ng-click="searchPlayer()" class="btn btn-small btn-default">Search</button>\n\t\t</form>\n\t</div>\n</div>')}]),angular.module("js/search/search.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/search/search.html",'<style>\n[data-toggle="collapse"].collapsed .if-not-collapsed {\n  display: none;\n}\n[data-toggle="collapse"]:not(.collapsed) .if-collapsed {\n  display: none;\n}\n</style>\n\n<div ng-if="loading">Loading...</div>\n\n<div ng-if="ps.players.length > 0 && !loading">\n\t\n\t\t<div ng-repeat="player in ps.players" class="card">\n\t\t\t<div class="panel panel-default">\n\t\t\t\t<div ng-if="ps.players.length > 1">\n\t\t\t\t\t<div class="panel-heading">\n\t\t\t\t\t\t<h2><a href="player/{{player.player_id}}">{{player.name}}</a> ({{player.elo}})</h2>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<player-details ng-if="ps.players.length == 1" player="player"></player-details>\n\t\t\t</div>\n\t\t</div>\n</div>\n')}]),angular.module("js/stats/faction_matchups.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/stats/faction_matchups.html",'<div>\n\t<div class="card col-xs-12" style="min-width:800px;">\n\t\t<h3>Faction Matchups</h3>\n\t\t\n\t\t<form class="form-inline">\n\t\t\n\t\t\t<div class="form-group">\n\t\t\t\t\n    \t\t\t<label>Faction</label>\n    \t\t\t<div class="clearfix"></div>\n\t\t\t\t<select class="form-control" ng-model="search.faction">\n\t\t\t\t\t<option ng-repeat="faction in factions" ng-selected="faction.faction == search.faction">{{faction.faction}}</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="form-group">\n\t\t\t\t<label>Agenda</label>\n\t\t\t\t<div class="clearfix"></div>\n\t\t\t\t<select class="form-control" ng-model="search.agenda">\n\t\t\t\t\t<option ng-repeat="agenda in agendas" ng-selected="agenda.agenda == search.agenda">{{agenda.agenda}}</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\n\t\t  \t<div class="form-group">\n\t\t  \t\t<label>From</label>\n\t\t  \t\t<div class="clearfix"></div>\n\t\t\t\t<input type="text" class="form-control" id="date" name="date" placeholder="From Date" ng-model="search.date" />\n\t\t\t</div>\n\t\t\t<div class="form-group">\n\t\t  \t\t<label>Match Threshold</label>\n\t\t  \t\t<div class="clearfix"></div>\n\t\t\t\t<input type="text" class="form-control" id="date" name="date" ng-model="threshold" />\n\t\t\t</div>\n\t\t  \t<button ng-click="loadFactionMatchups()" class="btn btn-small btn-default">Go</button>\n\t\t</form>\n\t\t\n\t\t<table class="table table-responsive table-stripped table-hover">\n\t\t\t<tr>\n\t\t\t\t<td>Faction</td>\n\t\t\t\t<td>Agenda</td>\n\t\t\t\t<td>Matchups</td>\n\t\t\t\t<td>Wins</td>\n\t\t\t\t<td>Losses</td>\n\t\t\t\t<td>Win Rate</td>\n\t\t\t</tr>\n\t\t\t\n\t\t\t<tr ng-repeat="entry in matchups" ng-if="entry.matches >= threshold">\n\t\t\t\t<td>{{entry.opponent_faction}}</td>\n\t\t\t\t<td>{{entry.opponent_agenda}}</td>\n\t\t\t\t<td><a href="javascript:void(0);" ng-click="show(search.faction, search.agenda, entry.opponent_faction, entry.opponent_agenda);">{{entry.matches}}</a></td>\n\t\t\t\t<td>{{entry.wins}}</td>\n\t\t\t\t<td>{{entry.losses}}</td>\n\t\t\t\t<td>{{(entry.wins / entry.matches) * 100 | number : 2}}%</td>\n\t\t\t</tr>\n\t\t\t\n\t\t</table>\n\t\t\n\t</div>\n</div>\n')}]),angular.module("js/stats/faction_wins_linechart.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/stats/faction_wins_linechart.html",'<div>\n\t<div class="card col-xs-12" style="min-width:800px;">\n\t\t<h3>Faction Wins by Date</h3>\n\t\t<canvas id="fwin-ytd"></canvas>\n\t</div>\n</div>\n')}]),angular.module("js/stats/match_details.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/stats/match_details.html",'<div class="modal" id="basicExample" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-dialog" role="document">\n        \x3c!--Content--\x3e\n        <div class="modal-content">\n            \x3c!--Header--\x3e\n            <div class="modal-header">\n            \t<button type="button" class="pull-right close" data-dismiss="modal" aria-label="Close">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n                <h4 class="modal-title w-100" id="myModalLabel">Matchup Details</h4>\n                \n            </div>\n            \x3c!--Body--\x3e\n            <div class="modal-body">\n                <table class="table table-responsive table-stripped">\n                \n                \t<tr ng-repeat="match in matches">\n                \t\t<td>\n                \t\t\t<span ng-if="match.player_1_id == match.winner_id">\n                \t\t\t<b>(W)</b>\n                \t\t\t</span>\n                \t\t\t<a href="player/{{match.player_1_id}}" onclick="$(\'.modal-backdrop\').remove();">{{match.player_1}}</a>\n                \t\t\t<span style="font-size:10px">({{match.player_1_elo}})</span>\n\t\t\t\t\t\t\t<br/>\n                \t\t\t<span ng-if="match.player_1_id == match.winner_id">\n                \t\t\t\t{{match.winner_faction}} <i>{{match.winner_agenda}}</i>\n                \t\t\t</span>\n\t\t\t\t\t\t\t<span ng-if="match.player_1_id == match.loser_id">\n                \t\t\t\t{{match.loser_faction}} <i>{{match.loser_agenda}}</i>\n                \t\t\t</span>\n                \t\t</td>\n                \t\t<td>\n                \t\t\t<span ng-if="match.player_2_id == match.winner_id">\n                \t\t\t<b>(W)</b>\n                \t\t\t</span>\n                \t\t\t<a href="player/{{match.player_2_id}}" onclick="$(\'.modal-backdrop\').remove();">{{match.player_2}}</a>\n                \t\t\t<span style="font-size:10px">({{match.player_2_elo}})</span>\n                \t\t\t<br/>\n\t\t\t\t\t\t\t<span ng-if="match.player_2_id == match.winner_id">\n                \t\t\t\t{{match.winner_faction}} <i>{{match.winner_agenda}}</i>\n                \t\t\t</span>\n\t\t\t\t\t\t\t<span ng-if="match.player_2_id == match.loser_id">\n                \t\t\t\t{{match.loser_faction}} <i>{{match.loser_agenda}}</i>\n                \t\t\t</span>\n                \t\t</td>\n                \t</tr>\n                \n                </table>\n            </div>\n            \x3c!--Footer--\x3e\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n        \x3c!--/.Content--\x3e\n    </div>\n</div>')}]),angular.module("js/stats/played_factions_linechart.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/stats/played_factions_linechart.html",'<div>\n\t<div class="card col-xs-12" style="min-width:800px;">\n\t\t<h3>Faction Entires by Date</h3>\n\t\t<canvas id="fent-ytd"></canvas>\n\t</div>\n</div>\n')}]),angular.module("js/stats/stats.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/stats/stats.html","<faction-matchups></faction-matchups>\n<br/>&nbsp;<br/>\n<played-factions-linechart></played-factions-linechart>\n<br/>&nbsp;<br/>\n<faction-wins-linechart></played-factions-linechart>\n<br/>&nbsp;<br/>\n")}]),angular.module("js/whatsnew/whatsnew.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("js/whatsnew/whatsnew.html",'<div class="panel-group" id="accordion">\n\t<div class="panel panel-default" ng-repeat="u in updates">\n\t\t<div class="panel-heading">\n\t\t\t<h4 class="panel-title">\n\t\t\t\t<a class="accordion-toggle" ng-class="$index!=0?\'collapsed\':\'\'" href="javascript:void(0);" data-toggle="collapse" data-parent="#accordion" data-target="#collapse{{u.date}}" aria-expanded="false">{{u.date}}</a>\n\t\t\t</h4>\n\t\t</div>\n\t\t<div id="collapse{{u.date}}" class="panel-collapse collapse"  ng-class="$index!=0?\'\':\'in\'" aria-expanded="false">\n\t\t\t<div class="panel-body">\n\t\t\t\t<div ng-bind-html="toTrustedHTML(u.update)"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>')}]);var MainCtrl=app.controller("LoginController",["$scope","Restangular","$routeParams","$route","$location","$q","Api","PlayerSearch",function($scope,Rest,$routeParams,$route,$location,$q,Api,PlayerSearch){$scope.new_user={},$scope.user={},$scope.error="","/login"==$location.path()?($scope.show_login=!0,$scope.show_create=!1):($scope.show_login=!1,$scope.show_create=!0),$scope.createAccount=function(){Api.createAccount($scope.new_user).then(function(res){res.data.user.user_id&&$location.path("/")})},$scope.accountLogin=function(){$scope.error="",Api.accountLogin($scope.user).then(function(res){res.data.user&&res.data.user.user_id?$location.path("/"):$scope.error=res.data.message})},$scope.toggleView=function(type){"create"==type?($scope.show_login=!1,$scope.show_create=!0):($scope.show_login=!0,$scope.show_create=!1)}}]);app.directive("groupList",["Api","ColorManager",function(Api,ColorManager){"use strict";return{restrict:"EA",replace:!0,transclude:!1,templateUrl:"js/groups/group_list.html",scope:{player:"=",mode:"&"},link:function(scope,elem,attrs){scope.groups=[],scope.getUserGroups=function(){console.log("loading groups"),Api.loadGroups().then(function(res){scope.groups=res.data.groups})},scope.setGroup=function(){}}}}]);var FaqCtrl=app.controller("FaqController",["$scope","Restangular","$routeParams","$route","$location","$q","Api","$sce",function($scope,Rest,$routeParams,$route,$location,$q,Api,$sce){$scope.loading=!1,$scope.faqs=[{id:1,q:"What is Calling the Banners?",a:"Calling the Banners is a result tracking site for A Game of Thrones 2nd Edition similar to Isle of Ravens, but focused more on individual and group tracking.  The idea is that players can create and invite others to 'play groups' where they can record the individual results of deck testing backed by the statistics from Isle of Ravnes.  Where IoR feeds off of results from The Jousting Pavilion, CtB crunches data based on individual game entries inputted by the user."},{id:2,q:"Why would I want to use CtB?",a:"As members of groups that focus on building decks and testing for large competitive events, we were using spreadsheets.  CtB simplifies data collection and sharing by making results and statistics easier to digest.  It utilizes the same data crunching features of IoR to present statistics on game results and faction strengths/weeknesses.  If you're into that kind of thing you might like CtB."},{id:3,q:"Where does this data come from and how often is it updated?",a:"CtB feeds off of the data you enter into it, and updates when you enter that data.  It isn't pulling results from anywhere other than the input of the players in your testing group."},{id:4,q:"Can other players see my testing results?",a:"Only members of your play group can see the results you post to that group."},{id:5,q:"Can I join or create multiple groups?",a:"Yes.  You can create and join as many groups as your heart desires."},{id:6,q:"Can I share my results between multiple groups?",a:"Not currently, the data lives in whatever group it is submitted to.  It's something we can build out if there is enough interest, so if you'd like to see this feature drop us a line."}],$scope.toTrustedHTML=function(html){return $sce.trustAsHtml(html)}}]),ContactCtrl=app.controller("ContactController",["$scope","Restangular","$routeParams","$route","$location","$q","Api","$sce","$http",function($scope,Rest,$routeParams,$route,$location,$q,Api,$sce,$http){$scope.success=!1,$scope.error=!1,$scope.sending=!1,$scope.user={},$scope.send=function(){$scope.sending=!0,Api.sendMail($scope.user).then(function(res){console.log(res),console.log($scope.user),$scope.success=!0,$scope.error=!1},function(response){$scope.error=!0,$scope.success=!1,console.log("Error with status code",response.status)})}}]),FaqCtrl=app.controller("WhatsNewController",["$scope","Restangular","$routeParams","$route","$location","$q","Api","$sce",function($scope,Rest,$routeParams,$route,$location,$q,Api,$sce){$scope.loading=!1,$scope.updates=[{date:"2017-08-01",update:"<ol><li>Fixed an issue with the data processor.  This was causing game results to lock in a loop and get recorded multiple times.</li><li>Pulled a fresh data set to fix errors from above and catch the latest name changes/merges.</li><li>Added additional information to the backend for some cool future features involving pulling stats.</li><li>Added a stats page to show some general stats (right now it's just faction entries YTD).</li></ol>"},{date:"2017-06-18",update:"<ol><li>Added pagination for top players, allowing seeing all players in the system</li><li>Changed how the search functions, now redirects to it's own page.</li><li>Search is now available from all pages.</li><li>Optomized UI layout.</li><li>Replaced google charts with charts.js.  More flexible and optomized for our purposes</li><li>Updated to material design elements.</li><li>Added 'What's new' page.</li><li>Fixed overflow issue with 'FAQ' and 'What's New' pages on initial load.</li></ol>"},{date:"2017-06-16",update:"<ol><li>Re-pulled all data to account for TJP name merges.</li><li>Added FAQ & Contact pages</li><li>Added player faction stats graph to player cards</li></ol>"}],$scope.toTrustedHTML=function(html){return $sce.trustAsHtml(html)}}]);app.directive("activeLink",["$location",function(location){return{restrict:"A",link:function(scope,element,attrs,controller){var clazz=attrs.activeLink,path="/"+attrs.link;console.log("checking path of "+path),scope.location=location,scope.$watch("location.path()",function(newPath){path===newPath?element.addClass(clazz):element.removeClass(clazz)})}}}]),app.factory("ColorManager",["Restangular","$rootScope","$q","$location","$http","Api",function(Rest,$rootScope,$q,$location,$http,Api){"use strict";window.CM=this;var CM=this;return this.cache={},this.colors=[{name:"Lannister",display:"Lannister",colors:{bg:"#C00106",text:"#FE9A9D"}},{name:"Stark",display:"Stark",colors:{bg:"#CFCFCF",text:"#333333"}},{name:"Targaryen",display:"Targaryen",colors:{bg:"#1C1C1C",text:"#CCCCCC"}},{name:"Greyjoy",display:"Greyjoy",colors:{bg:"#1D7A99",text:"#A9DDEF"}},{name:"Tyrell",display:"Tyrell",colors:{bg:"#509F16",text:"#C6F3A5"}},{name:"Baratheon",display:"Baratheon",colors:{bg:"#E3D852",text:"#5F5911"}},{name:"Night's Watch",display:"Night's Watch",colors:{bg:"#7A7A7A",text:"#333333"}},{name:"Martell",display:"Martell",colors:{bg:"#E89521",text:"#5C3A0A"}},{name:"Banner of the Lion",display:"Lion",colors:{bg:"#C00106",text:"#FE9A9D"}},{name:"Banner of the Wolf",display:"Wolf",colors:{bg:"#CFCFCF",text:"#333333"}},{name:"Banner of the Dragon",display:"Dragon",colors:{bg:"#1C1C1C",text:"#CCCCCC"}},{name:"Banner of the Kraken",display:"Kraken",colors:{bg:"#1D7A99",text:"#A9DDEF"}},{name:"Banner of the Rose",display:"Rose",colors:{bg:"#509F16",text:"#C6F3A5"}},{name:"Banner of the Stag",display:"Stag",colors:{bg:"#E3D852",text:"#5F5911"}},{name:"Banner of the Watch",display:"Watch",colors:{bg:"#7A7A7A",text:"#333333"}},{name:"Banner of the Sun",display:"Sun",colors:{bg:"#E89521",text:"#5C3A0A"}},{name:"Fealty",display:"Fealty",colors:{bg:"#7B0B20",text:"#F7A1B1"}},{name:"No agenda",display:"No agenda",colors:{bg:"#A99560",text:"#5A540F"}},{name:"The Lord of the Crossing",display:"Crossing",colors:{bg:"#6692A0",text:"#27393F"}},{name:"Kings of Summer",display:"Summer",colors:{bg:"#FCD700",text:"#665700"}},{name:"Kings of Winter",display:"Winter",colors:{bg:"#1C88D0",text:"#0C3B5A"}},{name:'"The Rains of Castamere"',display:"Rains",colors:{bg:"#D75B4D",text:"#5E1F18"}},{name:"Alliance",display:"Alliance",colors:{bg:"#845D70",text:"#1C1C1C"}},{name:"Protectors of the Realm",display:"Protectors",colors:{bg:"",text:""}},{name:"The Power of Wealth",display:"Power of Wealth",colors:{bg:"",text:""}},{name:"Treaty",display:"Treaty",colors:{bg:"",text:""}},{name:"Uniting the Seven Kingdoms",display:"Uniting",colors:{bg:"",text:""}}],{getBGColor:function(name){return CM.cache&&CM.cache.name==name||(CM.cache=_.find(CM.colors,function(o){return o.name==name})),CM.cache.colors.bg},getTextColor:function(name){return CM.cache&&CM.cache.name==name||(CM.cache=_.find(CM.colors,function(o){return o.name==name})),CM.cache.colors.text},getDisplayText:function(name){return CM.cache&&CM.cache.name==name||(CM.cache=_.find(CM.colors,function(o){return o.name==name})),CM.cache.display},findObj:function(name){var res={};return console.log(CM.colors),console.log("there were colors..."),angular.forEach(CM.colors,function(value,key){console.log("check "+value.name+" against "+name),value.name==name&&(res=value)}),res}}}]);